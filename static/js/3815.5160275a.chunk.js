"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[3815],{3815:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var t=a(5043),r=a(9094),l=a(9379),i=a(9981),n=a(9722),o=a(579);const c=()=>{const[e,s]=(0,t.useState)({firstName:"",lastName:"",email:"",mobileNumber:"",gender:""}),[a,r]=(0,t.useState)(!1),[c,d]=(0,t.useState)(""),[m,x]=(0,t.useState)(""),[u,p]=(0,t.useState)(!1),[b,h]=(0,t.useState)(""),[f,g]=(0,t.useState)(""),[j,N]=(0,t.useState)(""),[v,y]=(0,t.useState)(!1),[w,k]=(0,t.useState)(!1),[S,C]=(0,t.useState)(0),[A,_]=(0,t.useState)({mobileNumber:""}),P=e=>{const{name:a,value:t}=e.target;s(e=>(0,l.A)((0,l.A)({},e),{},{[a]:t}))};(0,t.useEffect)(()=>{if(S>0){const e=setInterval(()=>C(e=>e-1),1e3);return()=>clearInterval(e)}},[S]);const T=(0,t.useRef)(null);return(0,t.useEffect)(()=>{const e=e=>{T.current&&!T.current.contains(e.target)&&u&&u(!1)};return document.addEventListener("mousedown",e),document.body.style.overflow=u?"hidden":"auto",()=>{document.removeEventListener("mousedown",e),document.body.style.overflow="auto"}},[u]),(0,o.jsx)("div",{className:"dashboard-body__content",children:(0,o.jsx)("div",{className:"card common-card",children:(0,o.jsx)("div",{className:"card-body",children:(0,o.jsx)("div",{className:"row gy-4",children:(0,o.jsx)("div",{className:"col-lg-12 col-12",children:(0,o.jsxs)("div",{className:"setting-content","data-bs-spy":"scroll",children:[(0,o.jsxs)("div",{className:"card common-card border border-gray-five overflow-hidden mb-24",id:"personalInfo",children:[(0,o.jsx)("div",{className:"card-header",children:(0,o.jsx)("h6",{className:"title",children:"Patient Details"})}),(0,o.jsx)("div",{className:"card-body",children:(0,o.jsx)("form",{onSubmit:async s=>{if(s.preventDefault(),/^[6-9]\d{9}$/.test(e.mobileNumber))try{r(!0);const s=await n.A.post("".concat("https://api.4ceps.com","/api/users/send-otp"),e);s.data.success&&(d("OTP sent to your mobile number: ".concat(e.mobileNumber,". Please verify to complete registration.")),p(!0),C(Math.ceil((s.data.cooldown||300)/60)))}catch(i){var a,t;console.error("Error sending OTP:",i),x((null===i||void 0===i||null===(a=i.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Something went wrong.")}finally{r(!1)}else _(s=>(0,l.A)((0,l.A)({},s),{},{mobileNumber:10!==e.mobileNumber.length?"Mobile number must be exactly 10 digits":"Mobile number must start with 6, 7, 8, or 9"}))},encType:"multipart/form-data",children:(0,o.jsxs)("div",{className:"row gy-3",children:[(0,o.jsxs)("div",{className:"col-sm-6",children:[(0,o.jsx)("label",{htmlFor:"firstName",className:"form-label",children:"First Name"}),(0,o.jsx)("input",{type:"text",className:"common-input common-input--md border--color-dark bg--white",id:"firstName",name:"firstName",value:e.firstName,onChange:P,onKeyDown:e=>{/^[a-zA-Z\s'-]$|Backspace|Delete|Arrow/.test(e.key)||e.preventDefault()},required:!0})]}),(0,o.jsxs)("div",{className:"col-sm-6",children:[(0,o.jsx)("label",{htmlFor:"lastName",className:"form-label",children:"Last Name"}),(0,o.jsx)("input",{type:"text",className:"common-input common-input--md border--color-dark bg--white",id:"lastName",name:"lastName",value:e.lastName,onChange:P,onKeyDown:e=>{/^[a-zA-Z\s'-]$|Backspace|Delete|Arrow/.test(e.key)||e.preventDefault()},required:!0})]}),(0,o.jsxs)("div",{className:"col-sm-6",children:[(0,o.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),(0,o.jsx)("input",{type:"email",className:"common-input common-input--md border--color-dark bg--white",id:"email",name:"email",value:e.email,onChange:P,required:!0})]}),(0,o.jsxs)("div",{className:"col-sm-6",children:[(0,o.jsx)("label",{htmlFor:"mobileNumber",className:"form-label",children:"Mobile Number"}),(0,o.jsx)("input",{type:"tel",className:"common-input common-input--md border--color-dark bg--white",id:"mobileNumber",name:"mobileNumber",value:e.mobileNumber,onChange:P,onKeyPress:s=>{const a=s.key;/[0-9]/.test(a)&&(0!==e.mobileNumber.length||/[6-9]/.test(a))||s.preventDefault()},maxLength:10,required:!0}),A.mobileNumber&&(0,o.jsx)("small",{style:{color:"red"},children:A.mobileNumber})]}),(0,o.jsxs)("div",{className:"col-sm-6",children:[(0,o.jsx)("label",{className:"form-label",htmlFor:"gender",children:"Gender"}),(0,o.jsx)("div",{className:"d-flex align-items-center gap-3",children:["Male","Female","Other"].map(s=>(0,o.jsxs)("div",{className:"form-check",children:[(0,o.jsx)("input",{className:"form-check-input",type:"radio",id:s.toLowerCase(),name:"gender",value:s,checked:e.gender===s,onChange:P,required:!0}),(0,o.jsx)("label",{className:"form-check-label",htmlFor:s.toLowerCase(),children:s})]},s))})]}),m&&(0,o.jsx)("div",{className:"alert alert-danger text-center",children:m}),(0,o.jsx)("button",{type:"submit",className:"btn w-100 btn-main btn-md",disabled:a,children:a?"Sending OTP...":"Register"})]})})})]}),u&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,o.jsx)("div",{style:{backgroundColor:"#fff",borderRadius:"10px",maxWidth:"500px",width:"90%",boxShadow:"0 0 10px rgba(0,0,0,0.3)",overflowY:"auto",paddingBottom:"20px",position:"relative"},children:w?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{backgroundColor:"#28a745",color:"#fff",padding:"15px 20px",fontSize:"18px",fontWeight:"bold",position:"relative"},children:[(0,o.jsx)("i",{className:"fas fa-check-circle me-2"})," Registration Successful"]}),(0,o.jsxs)("div",{style:{padding:"20px",textAlign:"center",color:"#333"},children:[(0,o.jsx)("i",{className:"fas fa-check-circle text-success",style:{fontSize:"4rem",color:"#28a745"}}),(0,o.jsx)("h5",{className:"mt-3",children:"OTP Verified Successfully!"}),(0,o.jsx)("p",{className:"mt-2",children:"Please check your email to complete the registration process."}),(0,o.jsxs)("div",{style:{backgroundColor:"#e7f3ff",padding:"15px",borderRadius:"8px",textAlign:"left",marginTop:"15px"},children:[(0,o.jsx)("i",{className:"fas fa-envelope text-primary me-2",style:{fontSize:"1.2rem"}}),(0,o.jsx)("strong",{children:"Email sent to:"}),(0,o.jsx)("p",{style:{color:"#007bff",margin:"5px 0"},children:e.email}),(0,o.jsx)("small",{style:{color:"#666"},children:"Follow the instructions in the email to set your password."})]}),(0,o.jsx)("div",{className:"alert alert-warning border-0 mt-3",style:{backgroundColor:"#fff8e1"},children:(0,o.jsxs)("small",{className:"text-muted",children:[(0,o.jsx)("i",{className:"fas fa-info-circle me-1"}),"Don't forget to check your spam/junk folder if you don't see the email in your inbox."]})})]}),(0,o.jsx)("div",{style:{padding:"0 20px 20px 20px"},children:(0,o.jsxs)("button",{onClick:()=>{k(!1),p(!1),s({firstName:"",lastName:"",email:"",mobileNumber:"",gender:""}),h(""),N(""),g("")},style:{backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"6px",padding:"10px",width:"100%",fontSize:"16px",cursor:"pointer"},children:[(0,o.jsx)("i",{className:"fas fa-times me-2"})," Close"]})})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{backgroundColor:"#3a3a3a",color:"#fff",padding:"15px 20px",fontSize:"18px",fontWeight:"bold",position:"relative"},children:[(0,o.jsx)("i",{className:"fas fa-key me-2"})," Verify OTP",(0,o.jsx)("button",{onClick:()=>p(!1),style:{position:"absolute",top:"10px",right:"10px",background:"transparent",border:"none",fontSize:"22px",color:"#fff",cursor:"pointer"},children:"\xd7"})]}),(0,o.jsxs)("div",{style:{padding:"20px",color:"#333"},children:[(0,o.jsxs)("p",{children:["An OTP has been sent to your mobile number:"," ",(0,o.jsx)("strong",{children:e.mobileNumber})]}),(0,o.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter OTP",value:b,onChange:e=>h(e.target.value),maxLength:"6",style:{marginTop:"10px",textAlign:"center",fontSize:"18px",letterSpacing:"5px"}}),f&&(0,o.jsx)("div",{style:{backgroundColor:"#fdecea",color:"#d93025",padding:"10px",borderRadius:"6px",marginTop:"10px"},children:f}),j&&(0,o.jsxs)("div",{style:{backgroundColor:"#e7f7ed",color:"#0f9d58",padding:"10px",borderRadius:"6px",marginTop:"10px",display:"flex",alignItems:"center"},children:[(0,o.jsx)("i",{className:"fas fa-check-circle me-2"}),(0,o.jsx)("strong",{children:j})]})]}),(0,o.jsxs)("div",{style:{padding:"0 20px 20px 20px",display:"flex",flexDirection:"column",gap:"10px"},children:[(0,o.jsx)("div",{style:{textAlign:"right"},children:S>0?(0,o.jsxs)("span",{style:{color:"gray",fontSize:"14px"},children:["Resend in ",Math.ceil(S/60)," ",1===Math.ceil(S/60)?"minute":"minutes"]}):(0,o.jsx)("button",{onClick:async()=>{try{const s=await n.A.post("".concat("https://api.4ceps.com","/api/users/send-otp"),e);s.data.success&&(N("New OTP sent to your Phone Number."),g(""),C(Math.ceil((s.data.cooldown||300)/60)))}catch(t){var s,a;g((null===t||void 0===t||null===(s=t.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to resend OTP. Try again later."),N("")}},style:{color:"#007bff",background:"none",border:"none",cursor:"pointer",fontSize:"14px"},children:"Resend OTP"})}),(0,o.jsx)("button",{onClick:async()=>{try{y(!0);(await n.A.post("".concat("https://api.4ceps.com","/api/users/verify-otp"),(0,l.A)((0,l.A)({},e),{},{otp:b}))).data.success&&(g(""),N(""),k(!0))}catch(t){var s,a;console.error("OTP verification failed:",t),g((null===t||void 0===t||null===(s=t.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Invalid OTP. Please try again."),N(""),h("")}finally{y(!1)}},disabled:v,style:{backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"6px",padding:"10px",fontSize:"16px",cursor:"pointer"},children:v?"Verifying...":"Verify OTP"})]})]})})}),(0,o.jsx)("div",{className:"col-sm-12 mb-0 mt-5",children:(0,o.jsx)("div",{className:"have-account",children:(0,o.jsxs)("p",{className:"text font-14",children:["Already Registered?"," ",(0,o.jsx)(i.N_,{className:"link text-main text-decoration-underline fw-500",to:"/login",children:"Login"})]})})})]})})})})})})},d=()=>(0,o.jsx)("section",{className:"breadcrumb border-bottom p-0 d-block section-bg position-relative z-index-1",children:(0,o.jsxs)("div",{className:"breadcrumb-two",children:[(0,o.jsx)("img",{src:"assets/images/gradients/Bg2.webp",alt:"",className:"bg--gradient"}),(0,o.jsx)("div",{className:"container container-two",children:(0,o.jsx)("div",{className:"row justify-content-center",children:(0,o.jsx)("div",{className:"col-lg-12",children:(0,o.jsxs)("div",{className:"breadcrumb-two-content text-center",children:[(0,o.jsxs)("ul",{className:"breadcrumb-list flx-align gap-2 mb-2 justify-content-center",children:[(0,o.jsx)("li",{className:"breadcrumb-list__item font-14 text-body",children:(0,o.jsx)(i.N_,{to:"/",className:"breadcrumb-list__link text-body hover-text-main",children:"Home"})}),(0,o.jsx)("li",{className:"breadcrumb-list__item font-14 text-body",children:(0,o.jsx)("span",{className:"breadcrumb-list__icon font-10",children:(0,o.jsx)("i",{className:"fas fa-chevron-right"})})}),(0,o.jsx)("li",{className:"breadcrumb-list__item font-14 text-body",children:(0,o.jsx)("span",{className:"breadcrumb-list__text",children:"Register"})})]}),(0,o.jsx)("h3",{className:"breadcrumb-two-content__title mb-0 text-capitalize",children:"Patient Registration"}),(0,o.jsxs)(i.N_,{to:"/centre-register",style:{marginTop:"10px"},className:"btn btn-main pill",children:[(0,o.jsx)("span",{className:"icon-left icon",children:(0,o.jsx)("img",{src:"/assets/images/icons/user.svg",alt:""})}),"Register as Healthcare Centre"]})]})})})})]})});var m=a(7458),x=a(2784),u=a(6165);const p=()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.A,{}),(0,o.jsx)(m.A,{}),(0,o.jsx)(d,{}),(0,o.jsx)(r.A,{}),(0,o.jsx)(c,{}),(0,o.jsx)(x.A,{})]})},9094:(e,s,a)=>{a.d(s,{A:()=>r});var t=a(579);const r=()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"overlay"}),(0,t.jsx)("div",{className:"side-overlay"}),(0,t.jsx)("div",{className:"progress-wrap",children:(0,t.jsx)("svg",{className:"progress-circle svg-content",width:"100%",height:"100%",viewBox:"-1 -1 102 102",children:(0,t.jsx)("path",{d:"M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"})})})]})}}]);
//# sourceMappingURL=3815.5160275a.chunk.js.map