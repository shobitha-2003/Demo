"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[1394],{1394:(e,s,t)=>{t.r(s),t.d(s,{default:()=>n});var r=t(5043),a=t(9722),l=t(9981),o=t(579);const n=()=>{const[e]=(0,l.ok)(),s=e.get("role"),t=e.get("token"),[n,c]=(0,r.useState)(""),[i,d]=(0,r.useState)(""),[m,h]=(0,r.useState)(!1),[p,u]=(0,r.useState)(""),[w,g]=(0,r.useState)("info"),f=(0,l.Zp)(),x={length:(v=n).length>=8,lowercase:/[a-z]/.test(v),uppercase:/[A-Z]/.test(v),digit:/[0-9]/.test(v),special:/[!@#$%^&*(),.?":{}|<>]/.test(v)};var v;return(0,o.jsx)("div",{className:"container d-flex justify-content-center align-items-center",style:{minHeight:"100vh"},children:(0,o.jsxs)("div",{className:"card shadow p-4",style:{width:"100%",maxWidth:"420px",borderRadius:"12px"},children:[(0,o.jsx)("h3",{className:"text-center mb-4 text-primary",children:"Set Your Password"}),(0,o.jsxs)("div",{className:"form-group mb-3",children:[(0,o.jsx)("label",{htmlFor:"newPassword",className:"form-label fw-semibold",children:"Password"}),(0,o.jsx)("input",{type:m?"text":"password",id:"newPassword",className:"form-control",placeholder:"Enter new password",value:n,onChange:e=>c(e.target.value)}),(0,o.jsxs)("ul",{className:"mt-2 small",style:{listStyle:"none",paddingLeft:0},children:[(0,o.jsx)("li",{style:{color:x.length?"green":"red"},children:"At least 8 characters"}),(0,o.jsx)("li",{style:{color:x.lowercase?"green":"red"},children:"At least one lowercase letter"}),(0,o.jsx)("li",{style:{color:x.uppercase?"green":"red"},children:"At least one uppercase letter"}),(0,o.jsx)("li",{style:{color:x.digit?"green":"red"},children:"At least one digit"}),(0,o.jsx)("li",{style:{color:x.special?"green":"red"},children:"At least one special character"})]})]}),(0,o.jsxs)("div",{className:"form-group mb-3",children:[(0,o.jsx)("label",{htmlFor:"confirmPassword",className:"form-label fw-semibold",children:"Confirm Password"}),(0,o.jsx)("input",{type:m?"text":"password",id:"confirmPassword",className:"form-control",placeholder:"Confirm your password",value:i,onChange:e=>d(e.target.value)})]}),(0,o.jsxs)("div",{className:"form-check mb-3",children:[(0,o.jsx)("input",{className:"form-check-input",type:"checkbox",id:"showPasswordCheck",checked:m,onChange:()=>h(!m)}),(0,o.jsx)("label",{className:"form-check-label",htmlFor:"showPasswordCheck",children:"Show Password"})]}),(0,o.jsx)("button",{className:"btn btn-primary w-100 fw-bold",onClick:async()=>{if(Object.values(x).includes(!1))return u("Please fix the password requirements."),void g("danger");if(!n||!i)return u("Both fields are required."),void g("danger");if(n!==i)return u("Passwords do not match."),void g("danger");try{let e="";if("admin"===s)e="".concat("https://api.4ceps.com","/api/admin/reset-password");else if("user"===s)e="".concat("https://api.4ceps.com","/api/users/set-password");else{if("centre"!==s)return u("Invalid role"),void g("danger");e="".concat("https://api.4ceps.com","/api/centres/set-password")}await a.A.post(e,{token:t,password:n}),u("Password reset successfully. You can now login."),g("success"),setTimeout(()=>{"admin"===s?f("/admin-login"):"user"===s?f("/login"):"centre"===s&&f("/centre-login")},2e3)}catch(l){var e,r;const s=(null===(e=l.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||"Something went wrong. Try again.";u(s),g("danger")}},children:"Submit"}),p&&(0,o.jsx)("div",{className:"alert alert-".concat(w," mt-4 text-center"),role:"alert",children:p})]})})}}}]);
//# sourceMappingURL=1394.30cc7a1e.chunk.js.map