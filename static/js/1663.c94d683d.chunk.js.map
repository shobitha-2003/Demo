{"version":3,"file":"static/js/1663.c94d683d.chunk.js","mappings":"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","sources":["pages/ResetPassword.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\r\n\r\nconst ResetPassword = () => {\r\n  const [searchParams] = useSearchParams();\r\n  const role = searchParams.get(\"role\");\r\n  const token = searchParams.get(\"token\");\r\n\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [messageType, setMessageType] = useState(\"info\");\r\n  const navigate = useNavigate();\r\n\r\n  // ✅ Password validation rules\r\n  const validatePassword = (pwd) => {\r\n    return {\r\n      length: pwd.length >= 8,\r\n      lowercase: /[a-z]/.test(pwd),\r\n      uppercase: /[A-Z]/.test(pwd),\r\n      digit: /[0-9]/.test(pwd),\r\n      special: /[!@#$%^&*(),.?\":{}|<>]/.test(pwd),\r\n    };\r\n  };\r\n\r\n  const passwordChecks = validatePassword(password);\r\n\r\n  const handleSetPassword = async () => {\r\n    // Check if all validations passed\r\n    if (Object.values(passwordChecks).includes(false)) {\r\n      setMessage(\"Please fix the password requirements.\");\r\n      setMessageType(\"danger\");\r\n      return;\r\n    }\r\n\r\n    if (!password || !confirmPassword) {\r\n      setMessage(\"Both fields are required.\");\r\n      setMessageType(\"danger\");\r\n      return;\r\n    }\r\n\r\n    if (password !== confirmPassword) {\r\n      setMessage(\"Passwords do not match.\");\r\n      setMessageType(\"danger\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let apiUrl = \"\";\r\n\r\n      if (role === \"admin\")\r\n        apiUrl = `${process.env.REACT_APP_BACKEND_URL}/api/admin/reset-password`;\r\n      else if (role === \"user\")\r\n        apiUrl = `${process.env.REACT_APP_BACKEND_URL}/api/users/reset-password`;\r\n      else if (role === \"centre\")\r\n        apiUrl = `${process.env.REACT_APP_BACKEND_URL}/api/centres/reset-password`;\r\n      else {\r\n        setMessage(\"Invalid role\");\r\n        setMessageType(\"danger\");\r\n        return;\r\n      }\r\n\r\n      await axios.post(apiUrl, { token, password });\r\n\r\n      setMessage(\"Password reset successfully. You can now login.\");\r\n      setMessageType(\"success\");\r\n      setTimeout(() => {\r\n        if (role === \"admin\") {\r\n          navigate(\"/admin-login\");\r\n        } else if (role === \"user\") {\r\n          navigate(\"/login\");\r\n        } else if (role === \"centre\") {\r\n          navigate(\"/centre-login\");\r\n        }\r\n      }, 2000);\r\n    } catch (err) {\r\n      const errorMsg =\r\n        err.response?.data?.message || \"Something went wrong. Try again.\";\r\n      setMessage(errorMsg);\r\n      setMessageType(\"danger\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"container d-flex justify-content-center align-items-center\"\r\n      style={{ minHeight: \"100vh\" }}\r\n    >\r\n      <div\r\n        className=\"card shadow p-4\"\r\n        style={{ width: \"100%\", maxWidth: \"420px\", borderRadius: \"12px\" }}\r\n      >\r\n        <h4 className=\"text-center mb-4 text-primary\">Reset Your Password</h4>\r\n\r\n        {/* New Password */}\r\n        <div className=\"form-group mb-3\">\r\n          <label htmlFor=\"newPassword\" className=\"form-label fw-semibold\">\r\n            New Password\r\n          </label>\r\n          <input\r\n            type={showPassword ? \"text\" : \"password\"}\r\n            id=\"newPassword\"\r\n            className=\"form-control\"\r\n            placeholder=\"Enter your new password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n\r\n          {/* ✅ Show validation messages */}\r\n          <ul\r\n            className=\"mt-2 small\"\r\n            style={{ listStyle: \"none\", paddingLeft: 0 }}\r\n          >\r\n            <li style={{ color: passwordChecks.length ? \"green\" : \"red\" }}>\r\n              At least 8 characters\r\n            </li>\r\n            <li style={{ color: passwordChecks.lowercase ? \"green\" : \"red\" }}>\r\n              At least one lowercase letter\r\n            </li>\r\n            <li style={{ color: passwordChecks.uppercase ? \"green\" : \"red\" }}>\r\n              At least one uppercase letter\r\n            </li>\r\n            <li style={{ color: passwordChecks.digit ? \"green\" : \"red\" }}>\r\n              At least one digit\r\n            </li>\r\n            <li style={{ color: passwordChecks.special ? \"green\" : \"red\" }}>\r\n              At least one special character\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        {/* Confirm Password */}\r\n        <div className=\"form-group mb-3\">\r\n          <label htmlFor=\"confirmPassword\" className=\"form-label fw-semibold\">\r\n            Confirm Password\r\n          </label>\r\n          <input\r\n            type={showPassword ? \"text\" : \"password\"}\r\n            id=\"confirmPassword\"\r\n            className=\"form-control\"\r\n            placeholder=\"Confirm your password\"\r\n            value={confirmPassword}\r\n            onChange={(e) => setConfirmPassword(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        {/* Show/Hide password toggle */}\r\n        <div className=\"form-check mb-3\">\r\n          <input\r\n            className=\"form-check-input\"\r\n            type=\"checkbox\"\r\n            id=\"showPasswordCheck\"\r\n            checked={showPassword}\r\n            onChange={() => setShowPassword(!showPassword)}\r\n          />\r\n          <label className=\"form-check-label\" htmlFor=\"showPasswordCheck\">\r\n            Show Password\r\n          </label>\r\n        </div>\r\n\r\n        {/* Submit */}\r\n        <button\r\n          className=\"btn btn-primary w-100 fw-bold\"\r\n          onClick={handleSetPassword}\r\n        >\r\n          Submit\r\n        </button>\r\n\r\n        {/* Alert messages */}\r\n        {message && (\r\n          <div\r\n            className={`alert alert-${messageType} mt-4 text-center`}\r\n            role=\"alert\"\r\n          >\r\n            {message}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ResetPassword;\r\n"],"names":["ResetPassword","searchParams","useSearchParams","role","get","token","password","setPassword","useState","confirmPassword","setConfirmPassword","showPassword","setShowPassword","message","setMessage","messageType","setMessageType","navigate","useNavigate","passwordChecks","length","pwd","lowercase","test","uppercase","digit","special","_jsx","className","style","minHeight","children","_jsxs","width","maxWidth","borderRadius","htmlFor","type","id","placeholder","value","onChange","e","target","listStyle","paddingLeft","color","checked","onClick","async","Object","values","includes","apiUrl","concat","process","axios","post","setTimeout","err","_err$response","_err$response$data","errorMsg","response","data"],"sourceRoot":""}