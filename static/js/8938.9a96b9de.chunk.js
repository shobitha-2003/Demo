"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[8938],{1163:(e,a,s)=>{s(2382),s(579)},8938:(e,a,s)=>{s.r(a),s.d(a,{default:()=>g});var t=s(5043),l=s(6165),i=s(7458),n=(s(1163),s(2784)),o=s(9981),r=s(579);const c=()=>(0,r.jsxs)("section",{className:"breadcrumb breadcrumb-four padding-static-y-60 section-bg position-relative z-index-1 overflow-hidden",children:[(0,r.jsx)("img",{src:"assets/images/gradients/breadcrumb-gradient-bg.png",alt:"",className:"bg--gradient"}),(0,r.jsx)("div",{className:"container container-two",children:(0,r.jsx)("div",{className:"row justify-content-center",children:(0,r.jsx)("div",{className:"col-lg-12",children:(0,r.jsxs)("div",{className:"breadcrumb-four-content",children:[(0,r.jsx)("h3",{className:"breadcrumb-four-content__title text-center mb-3 text-capitalize",children:"Appointment Cart"}),(0,r.jsxs)("ul",{className:"breadcrumb-list flx-align justify-content-center gap-2 mb-2",children:[(0,r.jsx)("li",{className:"breadcrumb-list__item font-14 text-body",children:(0,r.jsx)(o.N_,{to:"/",className:"breadcrumb-list__link text-body hover-text-main",children:"Home"})}),(0,r.jsx)("li",{className:"breadcrumb-list__item font-14 text-body",children:(0,r.jsx)("span",{className:"breadcrumb-list__icon font-10",children:(0,r.jsx)("i",{className:"fas fa-chevron-right"})})}),(0,r.jsx)("li",{className:"breadcrumb-list__item font-14 text-body",children:(0,r.jsx)("span",{className:"breadcrumb-list__text",children:"Appointment Cart"})})]})]})})})})]});var d=s(9379),m=s(1100);const h=()=>{const{cartItems:e}=(0,m._)(),[a,s]=(0,t.useState)({name:"",email:"",mobile:""}),[l,i]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(l)s({name:"",email:"",mobile:""});else{const e=localStorage.getItem("user");if(e){const a=JSON.parse(e);s({name:a.name||"",email:a.email||"",mobile:a.mobileNumber||""})}}},[l]);const[n,c]=(0,t.useState)([]);(0,t.useEffect)(()=>{const a=JSON.parse(localStorage.getItem("appointmentDetails")||"{}"),s=e.map(e=>{var s,t;const l="service"===e.type,i=(e.type,l?null===e||void 0===e||null===(s=e.service)||void 0===s?void 0:s._id:null===e||void 0===e||null===(t=e.package)||void 0===t?void 0:t._id),n=a[i]||{date:"N/A",time:"N/A"};return(0,d.A)((0,d.A)({},e),{},{date:n.date,time:n.time})});c(s)},[e]);const h=n.reduce((e,a)=>{var s,t;return e+((null===a||void 0===a||null===(s=a.service)||void 0===s?void 0:s.totalPrice)||(null===a||void 0===a||null===(t=a.package)||void 0===t?void 0:t.totalPrice)||0)},0),g=(0,o.Zp)(),{clearCart:b}=(0,m._)(),[x,p]=(0,t.useState)(!1),[u,v]=(0,t.useState)(!1),[N,j]=(0,t.useState)(""),[f,y]=(0,t.useState)(!1),k=e=>e.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return(0,r.jsx)("section",{className:"cart-personal padding-y-120",children:(0,r.jsx)("div",{className:"container container-two",children:(0,r.jsxs)("div",{className:"row gy-5",children:[(0,r.jsx)("div",{className:"col-lg-8 pe-sm-5",children:(0,r.jsxs)("div",{className:"cart-personal__content",children:[(0,r.jsx)("h5",{className:"cart-personal__title mb-30",children:"Patient information"}),(0,r.jsx)("button",{to:"/login",className:"btn btn-main pill  mb-2",style:{marginRight:"10px"},onClick:()=>i(e=>!e),children:l?"Book for myself":"Book for someone"}),(0,r.jsxs)("form",{action:"#",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{htmlFor:"name",className:"form-label font-18 mb-2 fw-500 font-heading",children:["Name ",(0,r.jsx)("span",{className:"text-danger",children:"*"})," "]}),(0,r.jsx)("input",{type:"text",className:l?"common-input border":"common-input-city",id:"name",placeholder:"Enter Full Name",value:a.name,onChange:e=>{const a=e.target.value;/^[A-Za-z\s]*$/.test(a)&&s(e=>(0,d.A)((0,d.A)({},e),{},{name:a}))},disabled:!l})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{htmlFor:"email",className:"form-label font-18 mb-2 fw-500 font-heading",children:["Email Address ",(0,r.jsx)("span",{className:"text-danger",children:"*"})," "]}),(0,r.jsx)("input",{type:"email",className:l?"common-input border":"common-input-city",id:"email",placeholder:"Enter Email",value:a.email,onChange:e=>s(a=>(0,d.A)((0,d.A)({},a),{},{email:e.target.value})),disabled:!l})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{htmlFor:"mobileNo",className:"form-label font-18 mb-2 fw-500 font-heading",children:["Mobile No. ",(0,r.jsx)("span",{className:"text-danger",children:"*"})," "]}),(0,r.jsx)("input",{type:"tel",className:l?"common-input border":"common-input-city",id:"mobileNo",placeholder:"Enter Mobile No.",value:a.mobile,onChange:e=>{const a=e.target.value;/^[0-9]*$/.test(a)&&s(e=>(0,d.A)((0,d.A)({},e),{},{mobile:a}))},disabled:!l})]}),(0,r.jsxs)("div",{className:"mt-32 mb-32",children:[(0,r.jsxs)("div",{className:"common-check",children:[(0,r.jsx)("input",{className:"form-check-input",type:"checkbox",name:"checkboxagree",id:"agree",checked:x,onChange:e=>{p(e.target.checked),e.target.checked&&u&&j("")}}),(0,r.jsxs)("label",{htmlFor:"agree",className:"form-check-label mb-0",children:["Agree to"," ",(0,r.jsx)(o.N_,{to:"/terms-booking",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Terms & Conditions"})]})]}),(0,r.jsxs)("div",{className:"common-check mb-0",children:[(0,r.jsx)("input",{className:"form-check-input",type:"checkbox",name:"checkboxprivacy",id:"privacy",checked:u,onChange:e=>{v(e.target.checked),e.target.checked&&x&&j("")}}),(0,r.jsxs)("label",{htmlFor:"privacy",className:"form-check-label mb-0",children:["Agree to"," ",(0,r.jsx)(o.N_,{to:"/privacy-booking",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Privacy Policy"})]})]}),N&&(0,r.jsx)("p",{style:{color:"red",marginTop:"8px"},children:N}),(0,r.jsxs)("div",{style:{marginTop:"8px"},children:[(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"Note:"})}),(0,r.jsxs)("ul",{style:{listStyleType:"disc",paddingLeft:"1rem"},children:[(0,r.jsx)("li",{children:"Payment to be made at the center by showing the invoice generated by the system."}),(0,r.jsx)("li",{children:"Home services can be scheduled by directly calling the center."}),(0,r.jsx)("li",{children:"No cancellations are allowed after 2 hours from the time of booking."}),(0,r.jsx)("li",{children:"To Reschedule, please cancel the booking and book again."})]})]})]})]})]})}),(0,r.jsxs)("div",{className:"col-lg-4",children:[(0,r.jsxs)("div",{className:"order-summary",children:[(0,r.jsx)("h5",{className:"order-summary__title mb-16",children:"Booking Summary"}),(0,r.jsxs)("ul",{className:"billing-list",children:[n.map((e,a)=>{var s,t;const l="service"===e.type,i=(e.type,l?e.service:e.package);return(0,r.jsx)("li",{className:"billing-list__item mb-3",children:(0,r.jsxs)("section",{style:{display:"flex",justifyContent:"space-between",textAlign:""},children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-muted small",children:[(0,r.jsx)("span",{children:l?"Service Name:":"Package Name:"})," ",k(l?null===i||void 0===i?void 0:i.serviceName:null===i||void 0===i?void 0:i.packageName)]}),(0,r.jsxs)("div",{className:"text-muted small",children:[(0,r.jsx)("span",{children:"Centre Name:"})," ",k(null===i||void 0===i||null===(s=i.centre)||void 0===s?void 0:s.centreName)]}),(0,r.jsxs)("div",{className:"small",children:["Booking Date: ",e.date]}),(0,r.jsxs)("div",{className:"small",children:["Booking Time: ",e.time]}),(0,r.jsxs)("div",{className:"small",children:["Doctor Name: ",k(null===(t=i.doctors[0])||void 0===t?void 0:t.name)]})]}),(0,r.jsxs)("div",{style:{color:"#000000",fontWeight:"600",textAlign:"right"},children:["Cost: \u20b9",null===i||void 0===i?void 0:i.totalPrice]})]})},a)}),(0,r.jsxs)("li",{className:"billing-list__item flx-between",children:[(0,r.jsx)("span",{className:"text text-heading fw-500 d-flex flex-column",children:"Total Booking Cost(\u20b9)"}),(0,r.jsxs)("span",{className:"amount text-heading fw-500",children:["\u20b9",h]})]}),(0,r.jsxs)("li",{className:"billing-list__item flx-between",children:[(0,r.jsx)("span",{className:"text text-heading font-20 fw-500 font-heading",children:"Amount Payable(\u20b9)"}),(0,r.jsxs)("span",{className:"amount text-heading font-20 fw-500 font-heading",children:["\u20b9",h]})]})]}),(0,r.jsx)("button",{type:"button",className:"btn btn-outline-light pill btn-lg w-100 mt-32",style:{backgroundColor:"#000424 ",color:"white"},onClick:async()=>{if(!x&&!u)return void j("Please agree to the Terms & Conditions and Privacy Policy.");if(!x)return void j("Please agree to the Terms & Conditions.");if(!u)return void j("Please agree to the Privacy Policy.");j(""),y(!0);const e=await(async()=>{try{y(!0);const e=JSON.parse(localStorage.getItem("appointmentDetails")||"{}"),s=JSON.parse(localStorage.getItem("user")||"{}");if((null===s||void 0===s||!s._id)&&(null===s||void 0===s||!s.id))throw new Error("User not found. Please log in again.");if(!n||0===n.length)throw new Error("No services selected for booking.");const t={userId:s._id||s.id,services:n.map(a=>{var s,t,l,i;const n="service"===a.type?null===a||void 0===a||null===(s=a.service)||void 0===s?void 0:s._id:null===a||void 0===a||null===(t=a.package)||void 0===t?void 0:t._id;return{serviceId:n,appointmentDate:(null===(l=e[n])||void 0===l?void 0:l.date)||null,appointmentTime:(null===(i=e[n])||void 0===i?void 0:i.time)||null}})};l&&(t.patientDetails={firstName:a.name,lastName:"",email:a.email,mobileNumber:a.mobile});const i="".concat("https://api.4ceps.com",l?"/api/bookings/create/forSomeone":"/api/bookings/create"),o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await o.json();if(!o.ok)throw new Error((null===r||void 0===r?void 0:r.message)||"Failed to create booking");return localStorage.setItem("bookingResponse",JSON.stringify(r)),b(),localStorage.removeItem("appointmentDetails"),g("/cart-thank-you"),!0}catch(e){return console.error("Error creating booking:",e),alert(e.message||"Something went wrong while booking. Please try again."),!1}finally{y(!1)}})();y(!1),e&&g("/cart-thank-you")},disabled:f,children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Processing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"icon icon-left",children:(0,r.jsx)("img",{src:"assets/images/icons/cart-white.svg",alt:"Cart",className:"dark-version"})}),"Confirm Booking"]})})]}),(0,r.jsx)("div",{className:"cart-content__bottom flx-between gap-2 col-lg-8 order-lg-1",children:(0,r.jsxs)(o.N_,{to:"/cart",className:"btn btn-outline-light flx-align gap-2 pill btn-lg",children:[(0,r.jsx)("span",{className:"icon line-height-1 font-20",children:(0,r.jsx)("i",{className:"fas fa-arrow-left"})}),"Back"]})})]})]})})})},g=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{}),(0,r.jsx)(i.A,{}),(0,r.jsx)(c,{}),(0,r.jsx)(h,{}),(0,r.jsx)(n.A,{})]})}}]);
//# sourceMappingURL=8938.9a96b9de.chunk.js.map